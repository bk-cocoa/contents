---
title: JavaSilver紫本まとめ1
date: 2023-01-11T00:00:00+09:00
draft: true
summary: Javaプログラミング基礎
tags: [Java,Silver,まとめ,紫本]
katex: math
---
# Javaテクノロジーの概要
## Javaの特徴
1. Write Once, Run Anywhere:一度書けばどこでも動く
    * プログラムとOSの間に依存関係がないから、OSの差を気にする必要無いよ
2. Java実行環境：JVMによる処理
    * OS上で動くんじゃなくて、JVM:Java Virtual Machineの仮想実行環境で動くよ
3. オブジェクト指向
    * 開発とか設計とかでオブジェクト指向を実現できるよ

# Java環境のセットアップ
## Java環境とは
* Java言語を利用してプログラムを作成したり、作成したプログラムを実行するための環境
* JDK:Java SE Development Kit(開発キット)を使用して作るよ
* JDKはディストリビューションモデルだよ
    * OracleとかRed HatとかAzul Systemとか色々あるよ
    * 有償のものも無料のものもあるよ
## JDKの新しいリリースモデル、提供ライセンスについて(Oracleの話)
* OracleのJDKは年6回定期的にリリースされるよ
    * 半年に1回フィーチャーリリースされるよ
        * 新機能追加とか
    * それぞれのフィーチャーリリースに対して、2回アップデートリリースが行われるよ
        * 虚弱性対策とか
* OpenJDKについて
    * 無料版だよ
    * 現状、Oracle JDKとOpenJDKに機能的な差は無いよ
* 有償サポートについて
    * OpenJDKは最新バージョンだけ無償だよ
    * 新バージョンがリリースされたら旧バージョンはアップデートされないよ
    * 無償版の旧バージョンは、有償でアップデートを提供されるよ

## JDKとJRE
* JDK:Java SE Development Kit
* JRE:Java Runtime Environment
* 今はJREの単体配布は殆どされてない
    * 最新版のJREと旧バージョンのJREで挙動が違ったりする問題
    * 今は配布するアプリケーションにJREを同梱する形が主流
        * アプリケーションに必要なライブラリだけで構成したオリジナルJREを同梱することが可能

# Javaプログラムのコンパイルと実行

## プログラム実行までの流れ
1. コーディング
    * ソースファイルをJava言語で書くよ
2. コンパイル
    * `javac`コマンドでソースファイルをクラスファイルに変換するよ
    * クラスファイルはJVMが解釈できる形だよ
    * ここで失敗すると **コンパイルエラー** になるよ
3. 実行
    * クラスファイルを元に`java`コマンドで実行するよ
    * ここで失敗すると**実行時エラー**になるよ

## ソースファイルの作り方:コーディング
* メモ帳とかテキストエディタでソースファイルを書くよ
* ソースファイル作成時の注意点
    * ソースファイル名、ソースファイル内に記述する文は半角英数字を使用する
    * ファイル名は任意
    * 拡張子は **.java**
    * 英字の大文字、小文字は厳密に区別されるから中尉してね
    * 空白は**半角空白**か、**タブ文字**を使ってね、全角空白はダメだよ
* ソースファイルの中身
    * class宣言とメソッドに分かれるよ
        * ソースファイルには1つ以上のclass宣言が必要だよ
    * main()メソッド
        * Javaアプリケーションの特別なメソッド
        * `public static void main(String[] args]){...}`
        * `String args[]`でも大丈夫だよ
        * main()メソッドから実行されるよ
    * main()メソッドの悪い例(コンパイルエラー)
        * `public static void main(string[] args){}`
        * `public static main(String[] args]){}`
        * `public static void main(String[] ){}`
    * main()メソッドの悪い例(実行エラー)
        * `public static void main(String args){}`
        * `public void main(String[] args){}`
        * `public static void Main(String[] args){}`
    
## コンパイル
* ソースファイルからクラスファイルを生成する作業
* javacコマンドで行うよ
* 例：`javac Sample.java`
* 失敗するとコンパイルエラーが発生するよ

## プログラムの実行
* クラスファイルをJVM上で実行するよ
* `java`コマンドで行うよ
* 例：`java Sample`
* 拡張子(.class)はつけないよ
* 失敗すると実行時エラーが発生するよ

## コメント
```Java:comment.java
//コメント
/* 複数行
    コメント */
/** 複数行コメント
    ドキュメントコメントになる */
```

## ソースファイルとクラスファイル
* ソースファイルをコンパイルするとクラスファイルが生成されるよ
* このときのクラスファイルは、クラス名のクラスファイルが作成されるよ
```Java:Main.java
class Foo{...}
```
* 例：Main.javaをコンパイルすると作成されるクラスファイルは`Foo.class`
* 1つのソースファイルに複数クラスを定義することも出来るよ
```Java:Main.java
class Bar{...}
public class Main{
    public static void main(String[] args){
        System.out.println("Hello");
    }
}
```
* これをコンパイルすると、`Bar.class`と`Main.class`が出来るよ
* 複数クラスを定義した場合の注意
    * public修飾子をもったクラスは1つだけだよ
    * publicクラスを定義した場合、ソースファイル名はpublicクラス名と同じじゃないとダメだよ

## コンパイルせずにJavaコードの実行
* Java11から、Launch Single-File Source-Code Programsが導入されたよ
    * 一定のルールに従って書かれたソースファイルはコンパイルせずに直接実行出来る機能だよ
    * `Java Sample.java`
    * ソースファイルがメモリにコンパイルされて、ソースファイルで見つかった最初のクラスが実行されるよ
    * CLASSPATHに実行されるクラス名と同じ名前のクラスファイルがあったらエラーになるよ

## クラスの実行
* Write Once,Run Anywhere：一度書けばどこでも動く言語
    * Java言語で作成したプログラムはOSTに依存しない
    * クラスファイルは実行ファイルではなくて中間ファイル
        * JVMが解釈して実行するためのバイナリファイル
    * 普通に実行しすると、JVM内のコンパイラがコードの最適化をして効率上げてるよ

## CLASSPATH
* Java実行環境がクラスファイル,ソースファイルを検索するパスのこと
    * 環境変数の設定
    * java/javacコマンドに、-classpathオプションを使う
        * 試験で問われる
        * オプション使うと、「クラスファイルを探すディレクトリを追加」する
        * `java -classpath <ディレクトリ名> <クラスファイル名>`
        * `java -classpath 4 Main`

# パッケージ宣言とインポート
## パッケージ
* クラスを整理するために使う方法
    * クラス名の衝突を防ぐよ

## パッケージ化
* クラスを任意のパッケージに属させること
    * パッケージ化していないクラスは無名パッケージに属するよ
    * ソースファイルの先頭に`package <パッケージ名>;`でパッケージ化するよ
    * ドットで区切ると階層化できるよ

## パッケージ化されたクラスのコンパイルと実行
* パッケージ化されたクラスは、パッケージ名＋クラス名で扱う必要がある
* パッケージ名に対応したディレクトリを用意して、その中にクラスファイルを保存しておく必要がある
* javacコマンドに`-d`オプションをつけると、パッケージ名に対応したディレクトリを作成して、その下にクラスファイルを生成してくれる

## import文
* 異なるパッケージに属するクラスを参照する
* ソースファイルの先頭（packageの次）に`import クラス名`で利用できるよ
* import文を使用しなくても、パッケージ名＋クラス名を完全な名前で直接指定したら他パッケージのクラスも使用できるよ

## 利用される側のクラスに関する注意
* public修飾子があると自身が属するパッケージ以外のクラスから参照できるよ

## Java言語が提供する主なパッケージ
* いろんなクラスライブラリが準備されてるよ
    * java.lang
        * Javaの基本動作を提供してるパッケージ
        * String,Math,Integer
        * これだけは基本パッケージなのでimportしなくても使えるよ
    * java.io
        * 入出力関連の機能
        * File,PrintWriter,BufferedWriter
    * java.util
        * 複数のオブジェクトを一つにまとめたり、国際化とか日付操作とかのユーティリティクラス
        * HashSet,ArrayList,Vector
    * java.text
        * テキスト文字列、日付、数値などの構文解析や書式化を行うパッケージ
        * DateFormat,NumberFormat,MessageFormat
    